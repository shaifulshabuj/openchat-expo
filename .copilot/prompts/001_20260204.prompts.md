# Task 001: Initialize Expo Mobile App with Tabs Template

**Date:** 2026-02-04 14:00 JST  
**Phase:** 0.B - Project Scaffolding (Week 1-2 of 20)  
**Estimated Time:** 30 minutes  
**Complexity:** Simple  
**Files to Create:** ~50 files (new Expo app directory)  
**Files to Modify:** 1 file (root package.json for workspace)

---

## ğŸ¯ Objective

Initialize a new Expo mobile app in `apps/mobile/` using the official tabs template with TypeScript, creating the foundation for the OpenChat Expo migration.

---

## ğŸ“‹ Context

**Current State:**
- Empty `openchat-expo` repository
- Monorepo structure defined (pnpm + Turborepo)
- Root `package.json` exists with workspace configuration
- No mobile app exists yet

**Desired State:**
- Expo app in `apps/mobile/` directory
- App uses tabs template (bottom navigation)
- TypeScript configured
- Expo SDK 52 (latest)
- App runs successfully with `npx expo start`

**Why This Task:**
- First step in Phase 0.B (Project Scaffolding)
- Establishes mobile app foundation
- Required before adding NativeBase or NativeWind
- Dependency for all future mobile development

**Dependencies:**
- None (this is the first development task)

**Blocks:**
- Task 002: Install NativeBase
- Task 003: Configure NativeWind
- All Phase 1+ tasks

---

## ğŸ”§ Implementation Steps

### Step 1: Navigate to Repository Root
**Command:**
```bash
cd /Volumes/SATECHI_WD_BLACK_2/openchat-expo
```

**Verify:**
- [ ] In correct directory
- [ ] `package.json` exists
- [ ] `pnpm-workspace.yaml` exists

---

### Step 2: Create Expo App with Tabs Template
**Command:**
```bash
npx create-expo-app@latest apps/mobile --template tabs
```

**Expected Output:**
```
âœ” What is your app named? â€¦ openchat-mobile
âœ” Downloaded and extracted template.
ğŸ“¦ Using pnpm
âœ” Installed dependencies
âœ… Your project is ready!
```

**Verify:**
- [ ] `apps/mobile/` directory created
- [ ] `apps/mobile/package.json` exists
- [ ] `apps/mobile/app.json` exists
- [ ] `apps/mobile/app/` directory with tabs structure

---

### Step 3: Update Mobile App Package Name
**File:** `apps/mobile/package.json`

**Change:**
```json
{
  "name": "openchat-mobile",
  "version": "1.0.0",
  ...
}
```

**To:**
```json
{
  "name": "@openchat/mobile",
  "version": "0.1.0",
  ...
}
```

**Verify:**
- [ ] Name follows monorepo convention
- [ ] Version set to 0.1.0 (migration in progress)

---

### Step 4: Add Mobile App to Workspace
**File:** `pnpm-workspace.yaml`

**Check that it includes:**
```yaml
packages:
  - 'apps/*'
  - 'packages/*'
```

**If not, update to:**
```yaml
packages:
  - 'apps/*'
  - 'packages/*'
```

**Verify:**
- [ ] Workspace configuration includes apps/*
- [ ] pnpm will recognize mobile app

---

### Step 5: Install Dependencies via Workspace
**Command:**
```bash
pnpm install
```

**Expected Output:**
```
Lockfile is up to date, resolution step is skipped
Already up to date
```

**Verify:**
- [ ] No errors during installation
- [ ] `node_modules/` created in `apps/mobile/`
- [ ] Workspace links established

---

### Step 6: Test Expo App Starts
**Command:**
```bash
cd apps/mobile
npx expo start
```

**Expected Output:**
```
Starting Metro Bundler
â€º Metro waiting on exp://192.168.x.x:8081
â€º Scan the QR code above with Expo Go (Android) or the Camera app (iOS)
```

**Verify:**
- [ ] Metro bundler starts without errors
- [ ] QR code displayed
- [ ] No red error screens

**Stop the server:** Press `q` or Ctrl+C

---

### Step 7: Verify App Structure
**Command:**
```bash
cd /Volumes/SATECHI_WD_BLACK_2/openchat-expo
tree -L 3 apps/mobile -I node_modules
```

**Expected Structure:**
```
apps/mobile/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (tabs)/
â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”œâ”€â”€ explore.tsx
â”‚   â”‚   â””â”€â”€ _layout.tsx
â”‚   â”œâ”€â”€ +not-found.tsx
â”‚   â””â”€â”€ _layout.tsx
â”œâ”€â”€ assets/
â”œâ”€â”€ components/
â”œâ”€â”€ constants/
â”œâ”€â”€ hooks/
â”œâ”€â”€ app.json
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

**Verify:**
- [ ] Tab structure exists
- [ ] TypeScript files (.tsx)
- [ ] Assets directory present

---

## âœ… Quality Gates

### Standard Gates (ALL tasks):
- [ ] `git status` shows only intended changes
- [ ] `cd apps/mobile && pnpm type-check` passes (if exists)
- [ ] No console errors when running `npx expo start`
- [ ] App displays welcome screen successfully

### Task-Specific Gates:
- [ ] Expo app created in correct location (`apps/mobile/`)
- [ ] Package name follows convention (`@openchat/mobile`)
- [ ] App uses tabs template (bottom navigation visible)
- [ ] TypeScript configured (`.tsx` files, `tsconfig.json`)
- [ ] Expo SDK 52 installed (check `package.json` dependencies)
- [ ] Metro bundler starts without errors
- [ ] Workspace recognizes app (`pnpm install` works)

---

## ğŸ“š Files to Reference

**Read these for context:**
- `package.json` (root) - Workspace configuration
- `pnpm-workspace.yaml` - Workspace definition
- `work_reports/03_MIGRATION_DECISIONS.md` - Why tabs template chosen

**Follow patterns from:**
- PWA project structure (for comparison)
- Expo documentation: https://docs.expo.dev/tutorial/create-your-first-app/

---

## ğŸ“ Documentation Updates Required

After completing this task, update:

### 1. `.copilot/works/codex_work_progress_and_reply.md`
```markdown
## Task 001 Complete - Expo App Initialized

**Date:** 2026-02-04 14:30 JST

**What Was Done:**
- Created Expo mobile app in apps/mobile/
- Used tabs template with TypeScript
- Configured workspace integration
- Verified app starts successfully

**Verification:**
- Metro bundler starts: âœ…
- App displays: âœ…
- TypeScript configured: âœ…
- Workspace recognized: âœ…

**Time Taken:** 30 minutes
**Issues:** None
```

### 2. `work_reports/01_PROJECT_STATUS.md`
Add entry at top:
```markdown
## âœ… Latest Progress Update (February 4, 2026 14:30 JST) - **EXPO APP INITIALIZED** ğŸ‰

- ğŸ“± **Expo Mobile App**: Created with tabs template in apps/mobile/
- âœ… **Metro Bundler**: Starts successfully, QR code displayed
- ğŸ“¦ **Workspace**: Mobile app recognized by pnpm
- ğŸ¯ **Phase 0.B**: 1/12 tasks complete (8.3%)
- â±ï¸ **Timeline**: On track (Day 1 of Week 1)

### Phase 0.B Progress:
- [x] Task 001: Initialize Expo app âœ…
- [ ] Task 002: Install NativeBase (next)
```

### 3. `work_reports/00_FEATURE_CHECKLIST.md`
Update Phase 0 section:
```markdown
| Expo app initialized | âœ… | âœ… | âœ… | âœ… Complete | apps/mobile/ created with tabs | [x] |
```

### 4. `.copilot/works/codex_metrics.md`
```markdown
## Task 001 Metrics

- Estimated Time: 30 min
- Actual Time: 30 min
- Accuracy: 100%
- Files Created: ~50
- Files Modified: 1
- Quality Gates: 11/11 passed
- Issues: 0
```

### 5. `CHANGELOG.md`
```markdown
## [0.1.0] - 2026-02-04

### Added
- Initialized Expo mobile app with tabs template in apps/mobile/
- Configured TypeScript for mobile development
- Integrated mobile app into pnpm workspace
- Metro bundler setup and verified working

### Phase
- Phase 0.B: Project Scaffolding (Task 1/12 complete)
```

---

## ğŸ¯ Success Criteria

Task is complete when:
- [x] Expo app created in `apps/mobile/` directory
- [x] App uses tabs template (bottom navigation)
- [x] TypeScript configured (`.tsx` files)
- [x] Expo SDK 52 installed
- [x] Package name is `@openchat/mobile`
- [x] Workspace recognizes app
- [x] `npx expo start` runs without errors
- [x] App displays welcome screen
- [x] All quality gates pass
- [x] All 5 documentation files updated
- [x] Changes committed with clear message
- [x] Changes pushed to GitHub

---

## ğŸš¨ Rollback Plan

If task fails:

### Issue: Expo app creation fails
**Solution:**
```bash
rm -rf apps/mobile
npx create-expo-app@latest apps/mobile --template tabs
```

### Issue: Workspace doesn't recognize app
**Solution:**
```bash
cd /Volumes/SATECHI_WD_BLACK_2/openchat-expo
rm -rf node_modules
rm pnpm-lock.yaml
pnpm install
```

### Issue: Metro bundler fails to start
**Solution:**
```bash
cd apps/mobile
rm -rf node_modules .expo
pnpm install
npx expo start --clear
```

### Complete Rollback:
```bash
cd /Volumes/SATECHI_WD_BLACK_2/openchat-expo
git checkout apps/mobile
git clean -fd apps/mobile
```

---

## ğŸ”— Related Tasks

**Depends On:**
- None (first task)

**Blocks:**
- Task 002: Install NativeBase
- Task 003: Configure NativeWind
- Task 004: Initialize NestJS Backend
- All Phase 1+ tasks

**Related:**
- `.copilot/works/codex_next_priorities.md` - Task queue
- `work_reports/03_MIGRATION_DECISIONS.md` - Why tabs template

---

## ğŸ“Š Estimated Impact

**Lines of Code:** ~500 (template generated)  
**Files Created:** ~50  
**Files Modified:** 1 (root package.json)  
**Breaking Changes:** None  
**Migration Progress:** 0.B.1/12 (8.3% of Phase 0.B)

---

## ğŸ“ Learning Outcomes

After this task, you will have:
- âœ… Working Expo mobile app
- âœ… Tabs template structure
- âœ… TypeScript configuration
- âœ… Workspace integration
- âœ… Metro bundler familiarity
- âœ… Foundation for NativeBase/NativeWind

---

## ğŸ“ Notes

- **Template Choice:** Tabs template chosen for familiar navigation pattern
- **TypeScript:** All files are `.tsx` for type safety
- **SDK Version:** Expo SDK 52 is latest stable (as of Feb 2026)
- **File Structure:** Uses Expo Router file-based routing
- **Assets:** Template includes example icons and fonts

---

**Status:** NOT STARTED  
**Assignee:** Codex CLI (with manual fallback)  
**Blocking Issues:** None  
**Priority:** ï¿½ï¿½ HIGH (first development task)

---

## ğŸš€ Execution Command

**For Codex CLI:**
```bash
codex exec --full-auto -C /Volumes/SATECHI_WD_BLACK_2/openchat-expo "$(cat .copilot/prompts/001_20260204.prompts.md)"
```

**For Manual Execution:**
```bash
cat .copilot/prompts/001_20260204.prompts.md
# Then follow steps manually
```

**For GitHub Copilot:**
- Open this prompt file
- Follow 7-phase workflow from .github/copilot.instructions.md
- Execute steps in DELEGATE phase
- Verify in VERIFY phase
- Document in DOCUMENT phase

---

**Created:** 2026-02-04 14:00 JST  
**Updated:** 2026-02-04 14:00 JST  
**Version:** 1.0
